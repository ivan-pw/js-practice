(()=>{"use strict";const e=()=>{let e=!1;const t=function(t,n,s){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=document.querySelectorAll(t),a=document.querySelector(n),i=document.querySelector(s),c=document.querySelectorAll("[data-modal]"),d=function(){const e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return e.remove(),t}();o.forEach((t=>{t.addEventListener("click",(n=>{n.target&&n.preventDefault(),e=!0,l&&t.remove(),c.forEach((e=>{e.style.display="none",e.classList.add("animated","fadeIn")})),a.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${d}px`}))})),i.addEventListener("click",(e=>{c.forEach((e=>{e.style.display="none"})),a.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"})),a.addEventListener("click",(e=>{e.target===a&&(c.forEach((e=>{e.style.display="none"})),a.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")}))};t(".button-design",".popup-design",".popup-design .popup-close"),t(".button-consultation",".popup-consultation",".popup-consultation .popup-close"),window.addEventListener("scroll",(()=>{!e&&window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight-20&&document.querySelector(".fixed-gift").click()})),t(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0)},t=(e,t,n,s)=>{let l=1,o=!1;const a=document.querySelectorAll(e);function i(e){e>a.length&&(l=1),e<1&&(l=a.length),a.forEach((e=>{e.classList.add("animated"),e.style.display="none"})),a[l-1].style.display="block"}function c(e){i(l+=e)}i(l);try{const e=document.querySelector(n),t=document.querySelector(s);e.addEventListener("click",(()=>{c(-1),a[l-1].classList.remove("slideInLeft"),a[l-1].classList.add("slideInRight")})),t.addEventListener("click",(()=>{c(1),a[l-1].classList.remove("slideInRight"),a[l-1].classList.add("slideInLeft")}))}catch(e){console.log(e)}function d(){o="vertical"===t?setInterval((()=>{c(1),a[l-1].classList.add("slideInDown")}),4e3):setInterval((()=>{c(1),a[l-1].classList.remove("slideInRight"),a[l-1].classList.add("slideInLeft")}),4e3)}a[0].parentNode.addEventListener("mouseenter",(()=>{clearInterval(o)})),a[0].parentNode.addEventListener("mouseleave",(()=>{d()})),d()},n=e=>{const t=(e,t)=>{t.focus(),t.setSelectionRange?t.setSelectionRange(e,e):t.createTextRange&&t.createTextRange().collapse(!0).moveEnd("character",e).moveStart("character",e).select()};function n(e){e.target.selectionStart<2&&t(2,e.target);const n="+7 (___) ___ ____";let s=0;const l=n.replace(/\D/g,"");let o=this.value.replace(/\D/g,"");l.length>=o.length&&(o=l),this.value=n.replace(/./g,(e=>/[_\d]/.test(e)&&s<o.length?o.charAt(s++):s>=o.length?"":e)),"blur"===e.type?2==this.value.length&&(this.value=""):t(this.value.length,this)}document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",n),e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)}))},s=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("keypress",(e=>{e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()})),e.addEventListener("paste",(e=>{(e.clipboardData||window.clipboardData).getData("text").match(/[^а-яё 0-9]/gi)&&e.preventDefault()}))}))};window.addEventListener("DOMContentLoaded",(()=>{e(),t(".feedback-slider-item","",".main-prev-btn",".main-next-btn"),t(".main-slider-item","vertical"),(()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("input"),n=document.querySelectorAll("[name=upload]");n.forEach((e=>{e.addEventListener("input",(()=>{console.log(e.files);const t=e.files[0].name.split("."),n=t[0].length>6?"...":".",s=t[0].substring(0,6)+n+t[1];e.previousElementSibling.textContent=s}))})),e.forEach((e=>{e.addEventListener("submit",(s=>{s.preventDefault();const l=document.createElement("div");l.classList.add("status"),e.parentNode.appendChild(l),e.classList.add("animated","fadeOutUp"),setTimeout((()=>{e.style.display="none"}),400);const o=document.createElement("img");o.setAttribute("src","assets/img/spinner.gif"),o.classList.add("animated","fadeInUp"),l.appendChild(o);const a=document.createElement("div");a.textContent="Загрузка...",l.appendChild(a);const i=new FormData(e);let c;c=e.closest(".popup-design")||e.classList.contains("calc_form")?"assets/server.php":"assets/question.php",console.log(c),(async(e,t)=>{const n=await fetch(e,{method:"POST",body:t});return await n.text()})(c,i).then((e=>{a.textContent="Спасибо! Скоро наш менеджер Вам перезвонит",o.setAttribute("src","assets/img/ok.png")})).catch((()=>{o.setAttribute("src","assets/img/fail.png"),a.textContent="Что-то пошло не так :("})).finally((()=>{t.forEach((e=>{e.value=""})),n.forEach((e=>{e.previousElementSibling.textContent="Файл не выбран"})),setTimeout((()=>{l.remove(),e.style.display="block",e.classList.remove("fadeOutUp"),e.classList.add("fadeInUp")}),5e3)}))}))}))})(),n("[name=phone]"),s("[name=name]"),s("[name=message]")}))})();